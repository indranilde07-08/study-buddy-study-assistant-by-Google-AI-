{% extends 'main.html' %}
{% block content %}
<div class="mainapp-container">
    <h2 class="mainapp-title">ğŸ“‚ View Study Materials</h2>

    {% if user.is_authenticated %}
        {% if messages %}
        <div class="message-box">
            {% for message in messages %}
                <p id="message">{{ message }}</p>
            {% endfor %}
        </div>
        {% endif %}

        {% if materials %}
        <div class="table-container">
            <table class="styled-table">
                <thead>
                    <tr>
                        <th>ğŸ“– Title</th>
                        <th>ğŸ“‘ PDF</th>
                        <th>â³ Uploaded At</th>
                        <th>Edit Material</th>
                        <th>Delete Material</th>
                        <th>ğŸ“ Summary Notes</th>
                        <th>â“ Quiz Questions</th>
                    </tr>
                </thead>
                <tbody>
                {% for material in materials %}
                    <tr>
                        <td>{{ material.title }}</td>
                        <td><a href="{{ material.pdf.url }}" >â¬‡ï¸ Download</a></td>
                        <td>{{ material.uploaded_at }}</td>
                        <td><a href="{% url 'home:edit' material.id %}"><button class="edit-btn">âœï¸ Edit</button></a></td>
                        <td><a href="{% url 'home:delete' material.id %}"><button id="delete_button" class="delete-btn">ğŸ—‘ï¸ Delete</button></a></td>
                        <td><a href="{% url 'home:summary_study_material' material.id %}">
                            <button class="btn main-btn">ğŸ“ Summary</button>
                        </a></td>
                        <td><a href="{% url 'home:quiz_study_material' material.id %}">
                            <button class="btn quiz-btn">â“ Quiz</button>
                        </a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
            <p class="empty-msg">âš ï¸ No study materials found. Please upload some!</p>
        {% endif %}
    {% else %}
        <p class="empty-msg">ğŸ”’ Please login to view study materials</p>
    {% endif %}
</div>
{% endblock %}